<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Doctor Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen font-sans">

  <div class="max-w-5xl mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6 text-blue-700">👨‍⚕️ Doctor Dashboard</h1>

    <!-- Total Appointments Today -->
    <div class="bg-white p-4 rounded-xl shadow-md mb-6 flex justify-between items-center">
      <h2 class="text-xl font-semibold text-gray-800">Total Appointments Today</h2>
      <span id="total" class="text-2xl text-green-600 font-bold">0</span>
    </div>

    <!-- Current Patient -->
    <div class="bg-white p-6 rounded-xl shadow-md mb-4">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">🧑‍💼 Current Patient</h2>
      <div id="current-patient" class="text-lg text-gray-700">No patient called yet.</div>
    </div>

    <!-- Call Next Button -->
    <button onclick="callNextPatient()" class="bg-blue-600 text-white px-6 py-2 rounded-xl shadow hover:bg-blue-700 transition-all">
      📢 Call Next Patient
    </button>

    <!-- Patients Remaining -->
    <div class="mt-4 text-lg text-gray-700">
      Patients Remaining in Queue: <span id="remaining" class="font-semibold text-indigo-600">0</span>
    </div>

    <!-- Patient List -->
    <div class="mt-8">
      <h2 class="text-2xl font-semibold mb-4 text-gray-800">📝 All Patient Appointments</h2>
      <div id="patient-list" class="space-y-4"></div>
    </div>
  </div>

  <script>
    // Initial patient queue
    const queue = [
      { id: 1, name: "Ananya", age: 32, reason: "Fever", completed: false },
      { id: 2, name: "Rahul", age: 40, reason: "Headache", completed: false },
      { id: 3, name: "Sita", age: 27, reason: "Back pain", completed: false }
    ];

    let currentPatient = null;

    // On load: show counts and list
    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById('total').textContent = queue.length;
      document.getElementById('remaining').textContent = queue.length;
      renderPatientList();
    });

    function callNextPatient() {
      if (currentPatient) {
        alert("Please complete the current consultation first.");
        return;
      }

      const next = queue.find(p => !p.completed && !p.active);
      if (next) {
        next.active = true;
        currentPatient = next;

        document.getElementById('current-patient').innerHTML = `
          <div><strong>Name:</strong> ${next.name}</div>
          <div><strong>Age:</strong> ${next.age}</div>
          <div><strong>Reason:</strong> ${next.reason}</div>
          <button onclick="markAsDone(${next.id})" class="mt-4 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
            ✅ Mark Consultation as Done
          </button>
        `;
      } else {
        document.getElementById('current-patient').textContent = "✅ All patients have been seen.";
      }
    }

    function markAsDone(id) {
      const patient = queue.find(p => p.id === id);
      if (patient) {
        patient.completed = true;
        patient.active = false;
        currentPatient = null;

        document.getElementById('current-patient').textContent = "✔️ Consultation marked as completed.";
        document.getElementById('remaining').textContent = queue.filter(p => !p.completed).length;
        renderPatientList();
      }
    }

    function renderPatientList() {
      const list = document.getElementById('patient-list');
      list.innerHTML = "";

      queue.forEach(patient => {
        const card = document.createElement("div");
        card.className = `p-4 rounded-xl shadow-md ${
          patient.completed ? 'bg-green-100 border border-green-300' : 'bg-white'
        }`;

        card.innerHTML = `
          <div><strong>Name:</strong> ${patient.name}</div>
          <div><strong>Age:</strong> ${patient.age}</div>
          <div><strong>Reason:</strong> ${patient.reason}</div>
          <div><strong>Status:</strong> <span class="${patient.completed ? 'text-green-700 font-semibold' : 'text-yellow-600'}">
            ${patient.completed ? 'Completed' : 'Pending'}
          </span></div>
        `;

        list.appendChild(card);
      });
    }
  </script>
</body>
</html>
